#include <stdio.h>
#include "astar.h"


typedef struct __ASTAR_CONF
{
	const unsigned char *		bitmap;
	unsigned int				width;
	unsigned int				height;

	AstarPos					start;
	AstarPos					end;
}AstarConf;

int main(int argc, char **argv)
{
	const unsigned char mapmini[] =
		"#```````````````````````#"
		"#`##################````#"
		"#`````##```````````#````#"
		"#`````##```````````#````#"
		"#````###`#######``##````#"
		"#```````````````````````#"
		"#````###````````````````#"
		"#````##################`#"
		"#````######``````###````#"
		"#``#####````````````````#"
		"#``##```````````````````#"
		"#``##`#`````````````````#"
		"#`##``#`````````````````#"
		"#`````############``````#"
		"#```````````````````````#";
	const unsigned char mapadv[] =
		"#```````````````````````#"
		"#`##################````#"
		"#``````````````````#````#"
		"#``````````````````#````#"
		"########`#######``##````#"
		"#```````````````````````#"
		"#```````````````````````#"
		"#``##########``########`#"
		"#``########``````###````#"
		"#````###````````````````#"
		"#```````````````````````#"
		"#`````#`````````````````#"
		"#`````#`````````````````#"
		"#`````############``````#"
		"#`````#`````````````````#"
		"#`````#`````````````````#"
		"#`````#```````#########`#"
		"#`````#`````````````````#"
		"#```````````````````````#"
		"#``###########``````````#"
		"#``#````````````````````#"
		"#``#```````##########`###"
		"#``#####````````````````#"
		"#```````````#######`````#"
		"#```````````#```````````#"
		"#```````````#```````````#"
		"#````````````###````````#"
		"#```````````#```````````#"
		"#```````````#``#######`##"
		"#```````````#```````````#"
		"#```````````#```````````#"
		"#############```````````#"
		"#```````````````````````#";

	AstarConf conf1 = 
	{
		mapmini,
		25,
		15,
		{1, 0},
		{23,14}
	};

	AstarConf conf2 =
	{
		mapadv,
		25,
		33,
		{ 1, 0 },
		{ 23,32 }
	};

	AstarConf * conf = &conf1;

	// unwalkable walkable openlist closelist path begin end
	astar_set_indicator( "I   .xX" );

	AstarCellMap * cellmap = astar_generate_cellmap(conf->bitmap, conf->width, conf->height);
	AstarPath path;
	bool succeed = astar_find( cellmap, conf->start, conf->end , &path);
	if (succeed)
	{
		astar_print_cellmap(cellmap);
	}
	return 0;
}
